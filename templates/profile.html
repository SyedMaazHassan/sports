{% load static %}


{% include 'inc/head.inc.html' %}

<body>

  <div class="site-wrap">

    {% include 'inc/navbar.inc.html' %}


   
    <div class="hero overlay" style="background-image: url('../static/images/bg_3.jpg');">
        <div class="container">
          <div class="row align-items-center">
            <div class="col-sm-3"></div>
            <div class="col-lg-6 text-center">
      
                <div class="profile p-3 py-5 bg-dark">
                    <img class="my-3" src="media/profilePics/{{user.last_name}}" style="width: 120px; height:120px; border-radius: 100%;" alt="">
                    <h3 class="my-3 p-3 bg-black" style="border-radius: 10px;">{{user.username}}</h3>
                    <h3 class="my-3 p-3 bg-black" style="border-radius: 10px;">{{user.first_name}}</h3>

                </div>

            </div>
            <div class="col-sm-3">

            </div>
          </div>
        </div>
      </div>
    <div class="container mt-5">
        
    </div>
    

    

    
    
    <!-- <div class="container">


      <div class="row">
        <div class="col-lg-12">
          
          <div class="d-flex team-vs">
            <span class="score">4-1</span>
            <div class="team-1 w-50">
              <div class="team-details w-100 text-center">
                <img src="{% static 'images/logo_1.png' %}" alt="Image" class="img-fluid">
                <h3>LA LEGA <span>(win)</span></h3>
                <ul class="list-unstyled">
                  <li>Anja Landry (7)</li>
                  <li>Eadie Salinas (12)</li>
                  <li>Ashton Allen (10)</li>
                  <li>Baxter Metcalfe (5)</li>
                </ul>
              </div>
            </div>
            <div class="team-2 w-50">
              <div class="team-details w-100 text-center">
                <img src="{% static 'images/logo_2.png' %}" alt="Image" class="img-fluid">
                <h3>JUVENDU <span>(loss)</span></h3>
                <ul class="list-unstyled">
                  <li>Macauly Green (3)</li>
                  <li>Arham Stark (8)</li>
                  <li>Stephan Murillo (9)</li>
                  <li>Ned Ritter (5)</li>
                </ul>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div> -->





    <!-- All leagues section -->
    <div class="modal fade" id="create_team">
        <div class="modal-dialog">
          <div class="modal-content bg-dark">
            <form action="add_team" method="post" enctype="multipart/form-data">
              {% csrf_token %}
          
              <!-- Modal Header -->
              <div class="modal-header">
                <h4>Create your team</h4>
                <button type="button" class="close" data-dismiss="modal">&times;</button>
              </div>
              
              <!-- Modal body -->
              <div class="modal-body">
                  <div class="row">
                      <div class="col-sm-3">
                          <h4 class="my-3">Logo</h4>

                          <div class="p-0">
                            <div>
                                <img id="blah" onclick="upload_img('pic');" style="width:85px; height:85px; cursor:pointer; border-radius: 100%;" src="{% static 'images/profile_icon.png' %}" alt="Card image">
                            </div>
                        
                            <div style="height:0px; overflow:hidden">
                                <input type="file" id="pic" onchange="readURL(this, 'blah');" name="image" required>
    
                            </div>
    
                          </div>

                          <!-- <img src="{% static 'images/profile_icon.png' %}" style="width: 85px; height: 85px;" alt=""> -->
                      </div>
                      <div class="col-sm-8">
                          <h4 class="my-3">Team name</h4>

                          <input class="form-control" style="margin-top: 30px;" placeholder="Team name" type="text" name="team_name" required>
                      </div>
                  </div>

                  <hr>

                  <div class="row">
                    <div class="col-sm-3">
                        <h4 class="my-3">Picture</h4>
                        <div class="p-0">
                          <div>
                              <img id="blah2" onclick="upload_img('pic2');" style="width:85px; height:85px; cursor:pointer; border-radius: 100%;" src="{% static 'images/profile_icon.png' %}" alt="Card image">
                          </div>
                      
                          <div style="height:0px; overflow:hidden">
                              <input type="file" id="pic2" onchange="readURL(this, 'blah2');" name="image2" required>

                          </div>

                        </div>
                    </div>
                    <div class="col-sm-8">
                        <h4 class="my-3">Representative name</h4>

                        <input class="form-control" style="margin-top: 30px;" placeholder="Representative name" name="rep_name" type="text" required>
                    </div>
                  </div>
                  <hr>


                  <div class="row">
                    <div class="col-sm-3">
                        <h4 class="my-3">Picture</h4>
                        <div class="p-0">
                          <div>
                              <img id="blah3" onclick="upload_img('pic3');" style="width:85px; height:85px; cursor:pointer; border-radius: 100%;" src="{% static 'images/profile_icon.png' %}" alt="Card image">
                          </div>
                      
                          <div style="height:0px; overflow:hidden">
                              <input type="file" id="pic3" onchange="readURL(this, 'blah3');" name="image3" required>

                          </div>

                        </div>
                    </div>
                    <div class="col-sm-8">
                        <h4 class="my-3">Coach name</h4>

                        <input class="form-control" style="margin-top: 30px;" placeholder="Coach name" type="text" name="coach_name" required>
                    </div>
                </div>
              </div>
              
              <!-- Modal footer -->
              <div class="modal-footer">
                <button type="submit" class="btn btn-primary">Create team</button>
              </div>

            </form>
            
          </div>
        </div>
    </div>
    

    <!-- add player -->
    <div class="modal fade" id="add_player">
      <div class="modal-dialog">
        <div class="modal-content bg-dark">
          <form action="add_player" method="post" enctype="multipart/form-data">
            {% csrf_token %}
        
            <!-- Modal Header -->
            <div class="modal-header">
              <h4>Enter player details</h4>
              <button type="button" class="close" data-dismiss="modal">&times;</button>
            </div>
            
            <!-- Modal body -->
            <div class="modal-body">
                <div class="row">
                    <div class="col-sm-12 text-center">
                        <input type="hidden" name="team_id" id="team_id">

                        <div class="p-0">
                          <div class="mt-3">
                              <img id="player_blah" title="Player Image" onclick="upload_img('player_img');" style="width:85px; height:85px; cursor:pointer; border-radius: 100%;" src="{% static 'images/profile_icon.png' %}" alt="Card image">
                          </div>
                      
                          <div style="height:0px; overflow:hidden">
                              <input type="file" id="player_img" onchange="readURL(this, 'player_blah');" name="profile" required>
  
                          </div>
  
                        </div>

                        <!-- <img src="{% static 'images/profile_icon.png' %}" style="width: 85px; height: 85px;" alt=""> -->
                    </div>
                    <div class="col-sm-12">

                        <input class="form-control" style="margin-top: 30px;" placeholder="Player name" type="text" name="player_name" required>
                    </div>

                    <div class="col-sm-12">

                      <input class="form-control" min="0" style="margin-top: 30px;" placeholder="Player phone number" type="number" name="phone" required>
                    </div>

                    <div class="col-sm-12">
                       <h5 style="margin-top: 30px; margin-bottom: 15px;">Date of birth</h5>

                      <input class="form-control mb-3" placeholder="Player name" type="date" name="dob" required>
                    </div>
                </div>

              


              
            </div>
            
            <!-- Modal footer -->
            <div class="modal-footer">
              <button type="submit" class="btn btn-primary">Add player</button>
            </div>

          </form>
          
        </div>
      </div>
  </div>


    <div class="latest-news">
      <div class="container">
        <div class="row">
          <div class="col-12 title-section">
            <h1 class="heading float-left" style="font-size: 30px;">All Teams</h1>
         
                <button type="button" class="btn btn-primary float-right" data-toggle='modal' data-target='#create_team'>Create a team</button>
    
         
             
          </div>
        </div>
        <div class="row">
          {% if not TEAMS %}
            <div class="col-sm-4">
                <h2 class="my-5 mx-2">No team exists</h2>

            </div>
          {% endif %}

         

            {% for team in TEAMS %}

            <div class="col-sm-12 my-3">
               
                <div class="profile" style="width: 100%;">
                  <img src="media/{{team.team_logo}}" class="Slogo my-4 mt-5" alt="">
                  <h1 class="my-3" style="border-bottom: solid 1px white; width: fit-content; margin: auto;">
                    {{team.team_name}}
  
                  </h1>
                  <hr class="mx-5" style="color: white;">
  
                  

                  

                   <div class="row">
                      <div class="col-sm-4">
                        <img src="media/{{team.representative_pic}}" class="Slogo my-4" alt="">
                        <h5>Representative</h5>
                        <div class="text-center" style="margin: auto;">
                          <h4 class="my-3 bg-black text-white text-center" style="border-radius: 5px; color:white; width: fit-content; padding: 10px; margin: auto;">
                            {{team.representative_name}}
          
                          </h4>
                        </div>


                      </div>

                      <div class="col-sm-4">
                        <img src="media/profilePics/{{team.team_captain.last_name}}" class="Slogo my-4" alt="">
                        <h5>Captain</h5>
                        <div class="text-center" style="margin: auto;">
                          <h4 class="my-3 bg-black text-white text-center" style="border-radius: 5px; color:white; width: fit-content; padding: 10px; margin: auto;">
                            {{team.team_captain.first_name}}
          
                          </h4>
                        </div>
                       
                      </div>

                      <div class="col-sm-4">
                        <img src="media/{{team.team_logo}}" class="Slogo my-4" alt="">
                        <h5>Coach</h5>
                        <div class="text-center" style="margin: auto;">
                          <h4 class="my-3 bg-black text-white text-center" style="border-radius: 5px; color:white; width: fit-content; padding: 10px; margin: auto;">
                            {{team.coach_name}}
          
                          </h4>
                        </div>
                        
                      </div>
                   </div>
  
                   



  
                   <br>

                   <div>
                    <button type="button" class="btn btn-primary mb-4" data-toggle="collapse" data-target="#all_show_players">See players</button>
                    
                    {% if team.all_players and team.all_players|length < 22 %}
                      <button type="button" class="btn btn-primary mb-4" onclick="add_play('{{team.id}}')">Add players</button>
                    {% endif %}

                   </div>

                   <div id="all_show_players" class="row collapse px-5 pb-5">

                     {% if not team.all_players %}
                        <div class="col-sm-12">
                          <h3 class="my-4">No player exists</h3>

                        </div>
                     {% else %}

                     {% for player in team.all_players %}

                     <div class="col-sm-4 p-3">
                       <div class="profile">
                          <img src="media/{{player.player_img}}" class="Slogo my-4" alt="">
                          <div class="text-center" style="margin: auto;">
                            <h4 class="my-3 bg-black text-white text-center" style="border-radius: 5px; color:white; width: fit-content; padding: 10px; margin: auto;">
                              {{player.player_name}}
            
                            </h4>
                          </div>
                          <table class="table">
                            
                            <tbody>
                              
                              <tr>
                                <td>Phone</td>
                                <td>{{player.player_phone}}</td>
                              </tr>

                              <tr>
                                <td>DOB</td>
                                <td>{{player.player_dob}}</td>
                              </tr>
                            </tbody>
                          </table>
                          
                       </div>
                        


                     </div>

                    {% endfor %}


                     {% endif %}



                   </div>
  
                  
  
                </div>
            </div>

            {% endfor %}
           
    
         
        </div>

      </div>
    </div>




    <!-- end leagues section -->



    {% include 'inc/footer.inc.html' %}




  </div>
  <!-- .site-wrap -->

  {% include 'inc/bottomLinks.inc.html' %}

</body>

<script>
    function upload_img(which_pic) {
        $("#"+which_pic).click();
    }

    function readURL(input, show) {
        nameFile = input.files[0].name.split(".");
        nameFile = nameFile[nameFile.length-1];
        console.log(nameFile);
        if(nameFile=="jpg" || nameFile=="jpeg" || nameFile=="png"){
            if (input.files && input.files[0]) {
                var reader = new FileReader();
    
                reader.onload = function (e) {
                    $('#'+show)
                        .attr('src', e.target.result)
                        .width(85)
                        .height(85);
                };
    
                reader.readAsDataURL(input.files[0]);
            }
        }else{
            $("#mainDiv").load(location.href + " #mainDiv>*", "");
            alert("Invalid file type!");
        }
        
    }

    function add_play(team_id) {
        $("#team_id").val(team_id);
        $("#add_player").modal("show");
    }

</script>

</html>